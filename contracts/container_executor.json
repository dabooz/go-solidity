{"info":{"language":"Solidity","languageVersion":"0.3.1","abiDefinition":[{"inputs":[],"type":"function","constant":true,"name":"in_contract","outputs":[{"type":"bool","name":"r"}]},{"inputs":[],"type":"function","constant":true,"name":"get_owner","outputs":[{"type":"address","name":"r"}]},{"inputs":[],"type":"function","constant":false,"name":"kill","outputs":[]},{"inputs":[],"type":"function","constant":true,"name":"get_container_provider","outputs":[{"type":"address","name":"r"}]},{"inputs":[{"type":"string","name":"_whisperId"},{"type":"string","name":"_agreementId"},{"type":"uint256","name":"_amount"}],"type":"function","constant":false,"name":"new_container","outputs":[{"type":"bool","name":"r"}]},{"inputs":[],"type":"function","constant":true,"name":"get_bank","outputs":[{"type":"address","name":"r"}]},{"inputs":[{"type":"uint256","name":"_amount"}],"type":"function","constant":false,"name":"cancel_container","outputs":[{"type":"bool","name":"r"}]},{"inputs":[],"type":"function","constant":true,"name":"get_whisper","outputs":[{"type":"string","name":"r"}]},{"inputs":[],"type":"function","constant":true,"name":"get_agreement_id","outputs":[{"type":"string","name":"r"}]},{"inputs":[{"type":"address","name":"_bank"}],"type":"function","constant":false,"name":"set_bank","outputs":[]},{"inputs":[],"type":"function","constant":false,"name":"reject_container","outputs":[{"type":"bool","name":"r"}]},{"inputs":[],"type":"constructor","constant":false,"name":"","outputs":null},{"inputs":[{"type":"uint256","name":"_eventcode"},{"type":"address","name":"_proposer"},{"type":"address","name":"_owner"},{"type":"address","name":"_contract"},{"type":"uint256","name":"_amount"},{"type":"string","name":"_id"}],"type":"event","constant":false,"name":"NewContainer","outputs":null},{"inputs":[{"type":"uint256","name":"_eventcode"},{"type":"address","name":"_proposer"},{"type":"address","name":"_owner"},{"type":"address","name":"_contract"},{"type":"uint256","name":"_amount"},{"type":"string","name":"_id"}],"type":"event","constant":false,"name":"NewContainerError","outputs":null},{"inputs":[{"type":"uint256","name":"_eventcode"},{"type":"address","name":"_rejecter"},{"type":"address","name":"_owner"},{"type":"address","name":"_contract"},{"type":"string","name":"_id"}],"type":"event","constant":false,"name":"ContainerRejected","outputs":null},{"inputs":[{"type":"uint256","name":"_eventcode"},{"type":"address","name":"_canceller"},{"type":"address","name":"_owner"},{"type":"address","name":"_contract"},{"type":"uint256","name":"_amount"},{"type":"string","name":"_id"}],"type":"event","constant":false,"name":"ContainerCancelled","outputs":null}],"compilerVersion":"0.3.1","developerDoc":{"methods":{}},"userDoc":{"methods":{}},"source":"contract token_bank {function create_escrow(address _cp, address _contract, uint _amount) returns (bool rv) {}function cancel_escrow(address _proposer, address _cp, address _contract, uint _amount) returns (bool rv) {}}contract container_executor {address owner;string whisper;string agreement;address container_provider;token_bank piggy_bank;enum event_codes {new_container_event_code,new_container_error_event_code,container_rejected_event_code,container_cancelled_event_code}event NewContainer(uint indexed _eventcode, address indexed _proposer, address indexed _owner, address indexed _contract, uint _amount, string _id) anonymous;event NewContainerError(uint indexed _eventcode, address indexed _proposer, address indexed _owner, address indexed _contract, uint _amount, string _id) anonymous;event ContainerRejected(uint indexed _eventcode, address indexed _rejecter, address indexed _owner, address indexed _contract, string _id) anonymous;event ContainerCancelled(uint indexed _eventcode, address indexed _canceller, address indexed _owner, address indexed _contract, uint _amount, string _id) anonymous;function new_container(string _whisperId, string _agreementId, uint _amount) returns (bool r) {if (_amount == 0) {return false;}if (!in_contract()) {var escrowed = piggy_bank.create_escrow(owner,address(this),_amount);if (escrowed == true) {whisper = _whisperId;agreement = _agreementId;container_provider = tx.origin;NewContainer(uint(event_codes.new_container_event_code), tx.origin, owner, this, _amount, _agreementId);return true;} else {NewContainerError(uint(event_codes.new_container_error_event_code), tx.origin, owner, this, _amount, _agreementId);return false;}} else {return false;}}function reject_container() returns (bool r) {if (tx.origin == owner) {piggy_bank.cancel_escrow(container_provider, tx.origin, this, 0);ContainerRejected(uint(event_codes.container_rejected_event_code), tx.origin, owner, this, agreement);clear_container();return true;} else {return false;}}function cancel_container(uint _amount) returns (bool r) {if (container_provider != address(0) \u0026\u0026 tx.origin == container_provider) {piggy_bank.cancel_escrow(tx.origin, owner, this, _amount);ContainerCancelled(uint(event_codes.container_cancelled_event_code), tx.origin, owner, this, _amount, agreement);clear_container();return true;} else {piggy_bank.cancel_escrow(tx.origin, owner, this, _amount);return false;}}function clear_container() internal returns (bool r) {whisper = \"\";container_provider = address(0);agreement = \"\";}function in_contract() constant returns (bool r) {if (container_provider == address(0)) {return false;} else {return true;}}function get_agreement_id() constant returns (string r) {return agreement;}function get_container_provider() constant returns (address r) {return container_provider;}function get_whisper() constant returns (string r) {return whisper;}function container_executor() {owner = msg.sender;}function set_bank(address _bank) {if (owner == msg.sender) {piggy_bank = token_bank(_bank);}}function get_bank() constant returns (address r) {return piggy_bank;}function get_owner() constant returns (address r) {return owner;}function kill() {if (msg.sender == owner) suicide(owner);}}"},"code":"0x606060405260008054600160a060020a03191633179055610ab8806100246000396000f36060604052361561008d5760e060020a600035046307d805fa811461008f5780630ac298dc146100ae57806341c0e1b5146100c15780634b0d4d51146100e957806366048144146100fd5780636ac5278214610194578063781dba26146101a857806388c026b8146102c05780639f222cbf14610328578063dacf64e21461038f578063f91a4bb8146103c2575b005b6104b15b600354600090600160a060020a03168114156109fa576100be565b6104c3600054600160a060020a03165b90565b61008d60005433600160a060020a0390811691161415610a3957600054600160a060020a0316ff5b6104c3600354600160a060020a03166100be565b6040805160206004803580820135601f81018490048402850184019095528484526104b1949193602493909291840191908190840183828082843750506040805160208835808b0135601f8101839004830284018301909452838352979998604498929750919091019450909250829150840183828082843750949650509335935050505060006000826000141561054e57610652565b6104c3600454600160a060020a03166100be565b6104b1600435600354600090600160a060020a031681148015906101db5750600354600160a060020a0390811632909116145b156109345760048054600080546040805160e360020a631b2c70a1028152600160a060020a0332811696820196909652918516602483015230851660448301526064820187905251929093169263d963850892608482810193602093839003909101908290876161da5a03f115610002575050604080516000548582526020820183815260028054600019600182161561010002011681900494840185905230600160a060020a0390811696509283169432909316936003938993906060830190849080156109d85780601f106109ad576101008083540402835291602001916109d8565b6104e0604080516020818101835260008252825160018054600281831615610100026000190190911604601f81018490048402830184019095528482529293909291830182828015610a2d5780601f10610a0257610100808354040283529160200191610a2d565b60408051602081810183526000825260028054845160018216156101000260001901909116829004601f81018490048402820184019095528481526104e0949092830182828015610a2d5780601f10610a0257610100808354040283529160200191610a2d565b61008d60043560005433600160a060020a03908116911614156103bf5760048054600160a060020a031916821790555b50565b6104b16000805432600160a060020a039081169116141561087b57600480546003546040805160e360020a631b2c70a1028152600160a060020a039283169481019490945232821660248501523082166044850152606484018590525191169163d9638508916084828101926020929190829003018187876161da5a03f115610002575050604080518354602080835260028054600019600182161561010002011681900491840182905230600160a060020a039081169650928316943290931693909283928291820190849080156108ae5780601f10610883576101008083540402835291602001916108ae565b60408051918252519081900360200190f35b60408051600160a060020a03929092168252519081900360200190f35b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156105405780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b610556610093565b151561064d576004805460008054604080517fee44a6d3000000000000000000000000000000000000000000000000000000008152600160a060020a03928316958101959095523082166024860152604485018890525192169263ee44a6d392606482810193602093839003909101908290876161da5a03f11561000257505060405151915050600181141561065a578460016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061070e57805160ff19168380011785555b5061073e9291505b808211156107975760008155600101610639565b600091505b509392505050565b30600160a060020a0316600060009054906101000a9004600160a060020a0316600160a060020a031632600160a060020a03166001868860405180838152602001806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156106f75780820380516001836020036101000a031916815260200191505b50935050505060405180910390a460009150610652565b82800160010185558215610631579182015b82811115610631578251826000505591602001919060010190610720565b50508360026000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061079b57805160ff19168380011785555b506107cb929150610639565b5090565b8280016001018555821561078b579182015b8281111561078b5782518260005055916020019190600101906107ad565b505060038054600160a060020a031916329081178255600080546040805188815260208181018381528b51938301939093528a5130600160a060020a0390811698958116971695948b948d9493909260608501928683019282918591839186918d91600491601f860104600f0201f150905090810190601f1680156108645780820380516001836020036101000a031916815260200191505b50935050505060405180910390a460019150610652565b5060006100be565b820191906000526020600020905b81548152906001019060200180831161089157829003601f168201915b50509250505060405180910390a461092a5b6040805160208181019283905260009182905260018054818452935160ff191681559192610a3b917fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6600283861615610100026000190190931692909204601f0104810190610639565b50600190506100be565b60048054600080546040805160e360020a631b2c70a1028152600160a060020a0332811696820196909652918516602483015230851660448301526064820187905251929093169263d963850892608482810193602093839003909101908290876161da5a03f1156100025750600092506109f5915050565b820191906000526020600020905b8154815290600101906020018083116109bb57829003601f168201915b5050935050505060405180910390a46109ef6108c0565b50600190505b919050565b5060016100be565b820191906000526020600020905b815481529060010190602001808311610a1057829003601f168201915b505050505090506100be565b565b505060038054600160a060020a0319169055604080516020818101928390526000918290526002805492819052925160ff19168355610ab3916001811615610100026000190116839004601f01047f405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace90810190610639565b50509056"}